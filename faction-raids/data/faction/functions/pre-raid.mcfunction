# Common to all raids
# ---- Teams ----
# 0 - red
# 1 - blue
# 2 - green
# 3 - yellow
execute if score raid_bar-01 factions.next_stage = 1 factions.math run execute if score raid_bar-01 factions.team = 0 factions.math run bossbar set raid_bar-01 name "Red, return to Base 1!"
execute if score raid_bar-01 factions.next_stage = 1 factions.math run execute if score raid_bar-01 factions.team = 1 factions.math run bossbar set raid_bar-01 name "Blue, return to Base 1!"
execute if score raid_bar-01 factions.next_stage = 1 factions.math run execute if score raid_bar-01 factions.team = 2 factions.math run bossbar set raid_bar-01 name "Green, return to Base 1!"
execute if score raid_bar-01 factions.next_stage = 1 factions.math run execute if score raid_bar-01 factions.team = 3 factions.math run bossbar set raid_bar-01 name "Yellow, return to Base 1!"
execute if score raid_bar-02 factions.next_stage = 1 factions.math run execute if score raid_bar-02 factions.team = 0 factions.math run bossbar set raid_bar-02 name "Red, return to Base 2!"
execute if score raid_bar-02 factions.next_stage = 1 factions.math run execute if score raid_bar-02 factions.team = 1 factions.math run bossbar set raid_bar-02 name "Blue, return to Base 2!"
execute if score raid_bar-02 factions.next_stage = 1 factions.math run execute if score raid_bar-02 factions.team = 2 factions.math run bossbar set raid_bar-02 name "Green, return to Base 2!"
execute if score raid_bar-02 factions.next_stage = 1 factions.math run execute if score raid_bar-02 factions.team = 3 factions.math run bossbar set raid_bar-02 name "Yellow, return to Base 2!"
execute if score raid_bar-03 factions.next_stage = 1 factions.math run execute if score raid_bar-03 factions.team = 0 factions.math run bossbar set raid_bar-03 name "Red, return to Base 3!"
execute if score raid_bar-03 factions.next_stage = 1 factions.math run execute if score raid_bar-03 factions.team = 1 factions.math run bossbar set raid_bar-03 name "Blue, return to Base 3!"
execute if score raid_bar-03 factions.next_stage = 1 factions.math run execute if score raid_bar-03 factions.team = 2 factions.math run bossbar set raid_bar-03 name "Green, return to Base 3!"
execute if score raid_bar-03 factions.next_stage = 1 factions.math run execute if score raid_bar-03 factions.team = 3 factions.math run bossbar set raid_bar-03 name "Yellow, return to Base 3!"
execute if score raid_bar-04 factions.next_stage = 1 factions.math run execute if score raid_bar-04 factions.team = 0 factions.math run bossbar set raid_bar-04 name "Red, return to Base 4!"
execute if score raid_bar-04 factions.next_stage = 1 factions.math run execute if score raid_bar-04 factions.team = 1 factions.math run bossbar set raid_bar-04 name "Blue, return to Base 4!"
execute if score raid_bar-04 factions.next_stage = 1 factions.math run execute if score raid_bar-04 factions.team = 2 factions.math run bossbar set raid_bar-04 name "Green, return to Base 4!"
execute if score raid_bar-04 factions.next_stage = 1 factions.math run execute if score raid_bar-04 factions.team = 3 factions.math run bossbar set raid_bar-04 name "Yellow, return to Base 4!"
execute if score raid_bar-05 factions.next_stage = 1 factions.math run execute if score raid_bar-05 factions.team = 0 factions.math run bossbar set raid_bar-05 name "Red, return to Base 5!"
execute if score raid_bar-05 factions.next_stage = 1 factions.math run execute if score raid_bar-05 factions.team = 1 factions.math run bossbar set raid_bar-05 name "Blue, return to Base 5!"
execute if score raid_bar-05 factions.next_stage = 1 factions.math run execute if score raid_bar-05 factions.team = 2 factions.math run bossbar set raid_bar-05 name "Green, return to Base 5!"
execute if score raid_bar-05 factions.next_stage = 1 factions.math run execute if score raid_bar-05 factions.team = 3 factions.math run bossbar set raid_bar-05 name "Yellow, return to Base 5!"
execute if score raid_bar-06 factions.next_stage = 1 factions.math run execute if score raid_bar-06 factions.team = 0 factions.math run bossbar set raid_bar-06 name "Red, return to Base 6!"
execute if score raid_bar-06 factions.next_stage = 1 factions.math run execute if score raid_bar-06 factions.team = 1 factions.math run bossbar set raid_bar-06 name "Blue, return to Base 6!"
execute if score raid_bar-06 factions.next_stage = 1 factions.math run execute if score raid_bar-06 factions.team = 2 factions.math run bossbar set raid_bar-06 name "Green, return to Base 6!"
execute if score raid_bar-06 factions.next_stage = 1 factions.math run execute if score raid_bar-06 factions.team = 3 factions.math run bossbar set raid_bar-06 name "Yellow, return to Base 6!"
execute if score raid_bar-07 factions.next_stage = 1 factions.math run execute if score raid_bar-07 factions.team = 0 factions.math run bossbar set raid_bar-07 name "Red, return to Base 7!"
execute if score raid_bar-07 factions.next_stage = 1 factions.math run execute if score raid_bar-07 factions.team = 1 factions.math run bossbar set raid_bar-07 name "Blue, return to Base 7!"
execute if score raid_bar-07 factions.next_stage = 1 factions.math run execute if score raid_bar-07 factions.team = 2 factions.math run bossbar set raid_bar-07 name "Green, return to Base 7!"
execute if score raid_bar-07 factions.next_stage = 1 factions.math run execute if score raid_bar-07 factions.team = 3 factions.math run bossbar set raid_bar-07 name "Yellow, return to Base 7!"
execute if score raid_bar-08 factions.next_stage = 1 factions.math run execute if score raid_bar-08 factions.team = 0 factions.math run bossbar set raid_bar-08 name "Red, return to Base 8!"
execute if score raid_bar-08 factions.next_stage = 1 factions.math run execute if score raid_bar-08 factions.team = 1 factions.math run bossbar set raid_bar-08 name "Blue, return to Base 8!"
execute if score raid_bar-08 factions.next_stage = 1 factions.math run execute if score raid_bar-08 factions.team = 2 factions.math run bossbar set raid_bar-08 name "Green, return to Base 8!"
execute if score raid_bar-08 factions.next_stage = 1 factions.math run execute if score raid_bar-08 factions.team = 3 factions.math run bossbar set raid_bar-08 name "Yellow, return to Base 8!"
execute if score raid_bar-09 factions.next_stage = 1 factions.math run execute if score raid_bar-09 factions.team = 0 factions.math run bossbar set raid_bar-09 name "Red, return to Base 9!"
execute if score raid_bar-09 factions.next_stage = 1 factions.math run execute if score raid_bar-09 factions.team = 1 factions.math run bossbar set raid_bar-09 name "Blue, return to Base 9!"
execute if score raid_bar-09 factions.next_stage = 1 factions.math run execute if score raid_bar-09 factions.team = 2 factions.math run bossbar set raid_bar-09 name "Green, return to Base 9!"
execute if score raid_bar-09 factions.next_stage = 1 factions.math run execute if score raid_bar-09 factions.team = 3 factions.math run bossbar set raid_bar-09 name "Yellow, return to Base 9!"
execute if score raid_bar-10 factions.next_stage = 1 factions.math run execute if score raid_bar-10 factions.team = 0 factions.math run bossbar set raid_bar-10 name "Red, return to Base 10!"
execute if score raid_bar-10 factions.next_stage = 1 factions.math run execute if score raid_bar-10 factions.team = 1 factions.math run bossbar set raid_bar-10 name "Blue, return to Base 10!"
execute if score raid_bar-10 factions.next_stage = 1 factions.math run execute if score raid_bar-10 factions.team = 2 factions.math run bossbar set raid_bar-10 name "Green, return to Base 10!"
execute if score raid_bar-10 factions.next_stage = 1 factions.math run execute if score raid_bar-10 factions.team = 3 factions.math run bossbar set raid_bar-10 name "Yellow, return to Base 10!"
execute if score raid_bar-11 factions.next_stage = 1 factions.math run execute if score raid_bar-11 factions.team = 0 factions.math run bossbar set raid_bar-11 name "Red, return to Base 11!"
execute if score raid_bar-11 factions.next_stage = 1 factions.math run execute if score raid_bar-11 factions.team = 1 factions.math run bossbar set raid_bar-11 name "Blue, return to Base 11!"
execute if score raid_bar-11 factions.next_stage = 1 factions.math run execute if score raid_bar-11 factions.team = 2 factions.math run bossbar set raid_bar-11 name "Green, return to Base 11!"
execute if score raid_bar-11 factions.next_stage = 1 factions.math run execute if score raid_bar-11 factions.team = 3 factions.math run bossbar set raid_bar-11 name "Yellow, return to Base 11!"
execute if score raid_bar-12 factions.next_stage = 1 factions.math run execute if score raid_bar-12 factions.team = 0 factions.math run bossbar set raid_bar-12 name "Red, return to Base 12!"
execute if score raid_bar-12 factions.next_stage = 1 factions.math run execute if score raid_bar-12 factions.team = 1 factions.math run bossbar set raid_bar-12 name "Blue, return to Base 12!"
execute if score raid_bar-12 factions.next_stage = 1 factions.math run execute if score raid_bar-12 factions.team = 2 factions.math run bossbar set raid_bar-12 name "Green, return to Base 12!"
execute if score raid_bar-12 factions.next_stage = 1 factions.math run execute if score raid_bar-12 factions.team = 3 factions.math run bossbar set raid_bar-12 name "Yellow, return to Base 12!"
execute if score raid_bar-13 factions.next_stage = 1 factions.math run execute if score raid_bar-13 factions.team = 0 factions.math run bossbar set raid_bar-13 name "Red, return to Base 13!"
execute if score raid_bar-13 factions.next_stage = 1 factions.math run execute if score raid_bar-13 factions.team = 1 factions.math run bossbar set raid_bar-13 name "Blue, return to Base 13!"
execute if score raid_bar-13 factions.next_stage = 1 factions.math run execute if score raid_bar-13 factions.team = 2 factions.math run bossbar set raid_bar-13 name "Green, return to Base 13!"
execute if score raid_bar-13 factions.next_stage = 1 factions.math run execute if score raid_bar-13 factions.team = 3 factions.math run bossbar set raid_bar-13 name "Yellow, return to Base 13!"
execute if score raid_bar-14 factions.next_stage = 1 factions.math run execute if score raid_bar-14 factions.team = 0 factions.math run bossbar set raid_bar-14 name "Red, return to Base 14!"
execute if score raid_bar-14 factions.next_stage = 1 factions.math run execute if score raid_bar-14 factions.team = 1 factions.math run bossbar set raid_bar-14 name "Blue, return to Base 14!"
execute if score raid_bar-14 factions.next_stage = 1 factions.math run execute if score raid_bar-14 factions.team = 2 factions.math run bossbar set raid_bar-14 name "Green, return to Base 14!"
execute if score raid_bar-14 factions.next_stage = 1 factions.math run execute if score raid_bar-14 factions.team = 3 factions.math run bossbar set raid_bar-14 name "Yellow, return to Base 14!"
execute if score raid_bar-15 factions.next_stage = 1 factions.math run execute if score raid_bar-15 factions.team = 0 factions.math run bossbar set raid_bar-15 name "Red, return to Base 15!"
execute if score raid_bar-15 factions.next_stage = 1 factions.math run execute if score raid_bar-15 factions.team = 1 factions.math run bossbar set raid_bar-15 name "Blue, return to Base 15!"
execute if score raid_bar-15 factions.next_stage = 1 factions.math run execute if score raid_bar-15 factions.team = 2 factions.math run bossbar set raid_bar-15 name "Green, return to Base 15!"
execute if score raid_bar-15 factions.next_stage = 1 factions.math run execute if score raid_bar-15 factions.team = 3 factions.math run bossbar set raid_bar-15 name "Yellow, return to Base 15!"

execute if score @s raid-base = 1 factions.math run bossbar set raid_bar-01 color purple
execute if score @s raid-base = 2 factions.math run bossbar set raid_bar-02 color purple
execute if score @s raid-base = 3 factions.math run bossbar set raid_bar-03 color purple
execute if score @s raid-base = 4 factions.math run bossbar set raid_bar-04 color purple
execute if score @s raid-base = 5 factions.math run bossbar set raid_bar-05 color purple
execute if score @s raid-base = 6 factions.math run bossbar set raid_bar-06 color purple
execute if score @s raid-base = 7 factions.math run bossbar set raid_bar-07 color purple
execute if score @s raid-base = 8 factions.math run bossbar set raid_bar-08 color purple
execute if score @s raid-base = 9 factions.math run bossbar set raid_bar-09 color purple
execute if score @s raid-base = 10 factions.math run bossbar set raid_bar-10 color purple
execute if score @s raid-base = 11 factions.math run bossbar set raid_bar-11 color purple
execute if score @s raid-base = 12 factions.math run bossbar set raid_bar-12 color purple
execute if score @s raid-base = 13 factions.math run bossbar set raid_bar-13 color purple
execute if score @s raid-base = 14 factions.math run bossbar set raid_bar-14 color purple
execute if score @s raid-base = 15 factions.math run bossbar set raid_bar-15 color purple

execute if score @s raid-base = 1 factions.math run bossbar set raid_bar-01 visible true
execute if score @s raid-base = 2 factions.math run bossbar set raid_bar-02 visible true
execute if score @s raid-base = 3 factions.math run bossbar set raid_bar-03 visible true
execute if score @s raid-base = 4 factions.math run bossbar set raid_bar-04 visible true
execute if score @s raid-base = 5 factions.math run bossbar set raid_bar-05 visible true
execute if score @s raid-base = 6 factions.math run bossbar set raid_bar-06 visible true
execute if score @s raid-base = 7 factions.math run bossbar set raid_bar-07 visible true
execute if score @s raid-base = 8 factions.math run bossbar set raid_bar-08 visible true
execute if score @s raid-base = 9 factions.math run bossbar set raid_bar-09 visible true
execute if score @s raid-base = 10 factions.math run bossbar set raid_bar-10 visible true
execute if score @s raid-base = 11 factions.math run bossbar set raid_bar-11 visible true
execute if score @s raid-base = 12 factions.math run bossbar set raid_bar-12 visible true
execute if score @s raid-base = 13 factions.math run bossbar set raid_bar-13 visible true
execute if score @s raid-base = 14 factions.math run bossbar set raid_bar-14 visible true
execute if score @s raid-base = 15 factions.math run bossbar set raid_bar-15 visible true

execute if score @s raid-base = 1 factions.math run bossbar set raid_bar-01 players @a
execute if score @s raid-base = 2 factions.math run bossbar set raid_bar-02 players @a
execute if score @s raid-base = 3 factions.math run bossbar set raid_bar-03 players @a
execute if score @s raid-base = 4 factions.math run bossbar set raid_bar-04 players @a
execute if score @s raid-base = 5 factions.math run bossbar set raid_bar-05 players @a
execute if score @s raid-base = 6 factions.math run bossbar set raid_bar-06 players @a
execute if score @s raid-base = 7 factions.math run bossbar set raid_bar-07 players @a
execute if score @s raid-base = 8 factions.math run bossbar set raid_bar-08 players @a
execute if score @s raid-base = 9 factions.math run bossbar set raid_bar-09 players @a
execute if score @s raid-base = 10 factions.math run bossbar set raid_bar-10 players @a
execute if score @s raid-base = 11 factions.math run bossbar set raid_bar-11 players @a
execute if score @s raid-base = 12 factions.math run bossbar set raid_bar-12 players @a
execute if score @s raid-base = 13 factions.math run bossbar set raid_bar-13 players @a
execute if score @s raid-base = 14 factions.math run bossbar set raid_bar-14 players @a
execute if score @s raid-base = 15 factions.math run bossbar set raid_bar-15 players @a

execute if score @s raid-base = 1 factions.math run execute store result bossbar raid_bar-01 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 2 factions.math run execute store result bossbar raid_bar-02 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 3 factions.math run execute store result bossbar raid_bar-03 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 4 factions.math run execute store result bossbar raid_bar-04 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 5 factions.math run execute store result bossbar raid_bar-05 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 6 factions.math run execute store result bossbar raid_bar-06 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 7 factions.math run execute store result bossbar raid_bar-07 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 8 factions.math run execute store result bossbar raid_bar-08 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 9 factions.math run execute store result bossbar raid_bar-09 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 10 factions.math run execute store result bossbar raid_bar-10 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 11 factions.math run execute store result bossbar raid_bar-11 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 12 factions.math run execute store result bossbar raid_bar-12 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 13 factions.math run execute store result bossbar raid_bar-13 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 14 factions.math run execute store result bossbar raid_bar-14 max run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 15 factions.math run execute store result bossbar raid_bar-15 max run scoreboard players get pre-raid factions.timer

execute if score @s raid-base = 1 factions.math run execute store result bossbar raid_bar-01 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 2 factions.math run execute store result bossbar raid_bar-02 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 3 factions.math run execute store result bossbar raid_bar-03 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 4 factions.math run execute store result bossbar raid_bar-04 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 5 factions.math run execute store result bossbar raid_bar-05 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 6 factions.math run execute store result bossbar raid_bar-06 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 7 factions.math run execute store result bossbar raid_bar-07 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 8 factions.math run execute store result bossbar raid_bar-08 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 9 factions.math run execute store result bossbar raid_bar-09 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 10 factions.math run execute store result bossbar raid_bar-10 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 11 factions.math run execute store result bossbar raid_bar-11 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 12 factions.math run execute store result bossbar raid_bar-12 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 13 factions.math run execute store result bossbar raid_bar-13 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 14 factions.math run execute store result bossbar raid_bar-14 value run scoreboard players get pre-raid factions.timer
execute if score @s raid-base = 15 factions.math run execute store result bossbar raid_bar-15 value run scoreboard players get pre-raid factions.timer

execute if score @s raid-base = 1 factions.math run scoreboard players operation raid_bar-01 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 2 factions.math run scoreboard players operation raid_bar-02 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 3 factions.math run scoreboard players operation raid_bar-03 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 4 factions.math run scoreboard players operation raid_bar-04 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 5 factions.math run scoreboard players operation raid_bar-05 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 6 factions.math run scoreboard players operation raid_bar-06 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 7 factions.math run scoreboard players operation raid_bar-07 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 8 factions.math run scoreboard players operation raid_bar-08 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 9 factions.math run scoreboard players operation raid_bar-09 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 10 factions.math run scoreboard players operation raid_bar-10 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 11 factions.math run scoreboard players operation raid_bar-11 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 12 factions.math run scoreboard players operation raid_bar-12 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 13 factions.math run scoreboard players operation raid_bar-13 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 14 factions.math run scoreboard players operation raid_bar-14 factions.timer = pre-raid factions.timer
execute if score @s raid-base = 15 factions.math run scoreboard players operation raid_bar-15 factions.timer = pre-raid factions.timer

execute if score @s raid-base = 1 factions.math run scoreboard players operation raid_bar-01 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 2 factions.math run scoreboard players operation raid_bar-02 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 3 factions.math run scoreboard players operation raid_bar-03 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 4 factions.math run scoreboard players operation raid_bar-04 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 5 factions.math run scoreboard players operation raid_bar-05 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 6 factions.math run scoreboard players operation raid_bar-06 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 7 factions.math run scoreboard players operation raid_bar-07 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 8 factions.math run scoreboard players operation raid_bar-08 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 9 factions.math run scoreboard players operation raid_bar-09 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 10 factions.math run scoreboard players operation raid_bar-10 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 11 factions.math run scoreboard players operation raid_bar-11 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 12 factions.math run scoreboard players operation raid_bar-12 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 13 factions.math run scoreboard players operation raid_bar-13 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 14 factions.math run scoreboard players operation raid_bar-14 factions.raid_stage = 0 factions.math
execute if score @s raid-base = 15 factions.math run scoreboard players operation raid_bar-15 factions.raid_stage = 0 factions.math

scoreboard players set raid_bar-01 factions.next_stage 0
scoreboard players set raid_bar-02 factions.next_stage 0
scoreboard players set raid_bar-03 factions.next_stage 0
scoreboard players set raid_bar-04 factions.next_stage 0
scoreboard players set raid_bar-05 factions.next_stage 0
scoreboard players set raid_bar-06 factions.next_stage 0
scoreboard players set raid_bar-07 factions.next_stage 0
scoreboard players set raid_bar-08 factions.next_stage 0
scoreboard players set raid_bar-09 factions.next_stage 0
scoreboard players set raid_bar-10 factions.next_stage 0
scoreboard players set raid_bar-11 factions.next_stage 0
scoreboard players set raid_bar-12 factions.next_stage 0
scoreboard players set raid_bar-13 factions.next_stage 0
scoreboard players set raid_bar-14 factions.next_stage 0
scoreboard players set raid_bar-15 factions.next_stage 0
